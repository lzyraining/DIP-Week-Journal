<!Doctype html>
<html>
    <head>
       <meta charset="utf-8">
       <meta http-equiv="X-UA-Compatible" content="IE=edge">
       <meta name="viewpoint" content="width=device-width, initial scale=1">
	   <title>Zhuoyu's DIP Week Journal</title> 
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
	   <link rel="stylesheet" href="../css/main.css" type="text/css">
    </head>
    <body>
        <div calss="container" id="top">
            <div class="row header">
                <div class="col-xs-8 col-xs-push-2">
                    <h2>ENEE631 Digital Image Processing Week Journal</h1>
			        <h3>@Zhuoyu Li, University of Maryland, College Park </h3>
                </div>
                <div class="col-xs-2">
                    <a href="https://github.com/lzyraining/DIP-Week-Journal.git" target="_blank"><img class="img-responsive logo" src="../image/github_logo.png"></a>
                </div>
            </div>
            <div class="row">
                <div class="nav-bar col-xs-3">
                    <div class="row mypicture">
                        <div class="col-xs-8 col-xs-push-2">
                            <image class="me img-responsive" src="../image/IMG_0846.jpg">
                        </div>
                    </div>
                    <div class="row nav-content">
                        <ul class="nav-tab">
                           <a href="../index.html"><li><span class="glyphicon glyphicon-home" aria-hidden="true"></span> &nbsp;&nbsp;&nbsp;Home</li></a>
                           <a href="matlab_warmup.pdf" target="_blank"><li><span class="glyphicon glyphicon-fire" aria-hidden="true"></span> &nbsp;&nbsp;&nbsp;Matlab Warmingup</li></a>
                           <li class="inactive"><span class="glyphicon glyphicon-book" aria-hidden="true"> Week Journal</li>
                              <ul class="jounal-content">
                                  <a href="Week2.html"><li>Week 2</li></a>
                                  <a href="Week3.html"><li>Week 3</li></a>
                                  <a href="Week4.html"><li class="active">Week 4</li></a>
                                  <a href="Week5.html"><li>Week 5</li></a>
                                  <a href="Week6.html"><li>Week 6</li></a>
                                  <a href="Week8.html"><li>Week 8</li></a>
                                  <a href="Week11.html"><li>Week 11</li></a>
                                  <a href="Week13.html"><li>Week 13</li></a>
                              </ul>
                        </ul>
                    </div>   
                </div>
                <div class="col-xs-9 content">
                    <div class="topic">
                        <h3>Sptial Filter (Time Domain)</h3>
                        <h4><em>Average Filter</em></h4>
                        <h6><em>Written by on Feb. 24, 2015</em>Zhuoyu Li.</h6>
                        <p>Here we start with 256x256 gray lena picture.</p>
                        <p><em>Upsampling</em></p>
                        <p>We first talk about upsampling with AF. In oder to compare the results, we consider three cases.</p>
                        <p> 1)upsampling without AF. 2)upsampling then go through AF. 3)Go through AF then umsampling.</p>
                        <P>Here shows the results corrsonding to the three cases. </p>
                        <div class="content-image">
                           <img src="../image/Feb 24/upsampling.jpg" style="width: 256px;">
                           <img src="../image/Feb 24/upsamplingAF1.jpg" style="width: 256px;">
                           <img src="../image/Feb 24/upsamplingAF2.jpg" style="width: 256px;">
                        </div>
                        <p>In case 1, without AF the picture become less smooth and we can see obovious defects (e.g. lena's eyes) for lack of enough information.</p>
                        <p>In case 2, the upsampling picture goes through the AF and become smooth and we don't see obvious defects. But at a cost, the picture gets blurred. </p>
                        <p>In case 3, the original picture goes through with AF and generating a picture which each pixel is less contracted to its neighborhood. </p>
                        <p>Then the new generated picture is upsampled. As a result, the output picture is smoother than case 1 and less blurred than case 2. </p>
                        <p><em>Downsampling</em></p>
                        <p>Then we talk about how LPF affects downsampling. In order to see the results, we start with a 512x512 lena gray picture. </p>
                        <p>The we compare the results of downsampling without AF and with AF. </p>
                        <div class="content-image">
                           <img src="../image/Feb 24/downsampling.jpg"/>
                           <img src="../image/Feb 24/downsamplingAF.jpg"/>
                        </div>
                        <p>The results show that the output two pictures are almost the same. </p>
                        <p>The reason is that when we do downsampling, we take mean value of a 4x4 pixels. Compared to AF, we also take mean value of 3x3 neighborhood. </p>
                        <p>Actually when we let the original picture go through the AF then downsampling, we take mean value of its neighborhood twice to a new piexl. </p>
                        <p>So based on this suppose, I believe that when we downsampling a heavy noised picture, LPF will do a good job. </p>
                        <p><em>Noise smoothing</em></p>
                        <p>At last, we show the AF's influence on the noised pictures. </p>
                        <p>Firstly, we get the pictures with different extent Gaussin noise. </p>
                        <div class="content-image">
                            <img src="../image/Feb 24/nG1.jpg"/>
                            <img src="../image/Feb 24/nG2.jpg"/>
                            <img src="../image/Feb 24/nG3.jpg"/>
                        </div>
                        <p>Then we let this pictures go through a AF and see the output. </p>
                        <div class="content-image">
                            <img src="../image/Feb 24/nG1AF.jpg"/>
                            <img src="../image/Feb 24/nG2AF.jpg"/>
                            <img src="../image/Feb 24/nG3AF.jpg"/>
                        </div>
                        <p>The results show that AF actually low down the background Gaussin noise. But when the picture is heavy nosied, AF doesn't help a lot. </p>
                        <p>We can use a bigger AF (5x5 or 7x7), but the picture will get more blurred. So in this case, better method is needed to remove the background noise. </p>
                        <p>Matlab Code:</p>
                        <pre class="mcode">
clear;clc;
A=imread('lena.jpg');
B=ones(3,3)/9; %define low pass filter 
                
%---------upsampling-----------%
P=ones(2,2,'uint8');
upA=kron(A,P);
imwrite(upA,'upsampling.jpg');
%upsampling then get through LPF
C=imfilter(A, B, 'conv', 'replicate');
upC=kron(C,P);
imwrite(upC,'upsamplingAF1.jpg');
%get through LPF then upsampling
upD=kron(A,P);
upD=imfilter(upD, B, 'conv', 'replicate');
imwrite(upD,'upsamplingAF2.jpg'); 
%----------downsmapling----------%
L=imread('lena512.tif');
[row col]=size(L);
%downsampling 
downL=zeros(row/4,col/4);
for i=1:1:row/4 
    for j=1:1:col/4
        downL(i,j)=mean2(L((i-1)*4+1:1:i*4,(j-1)*4+1:1:j*4));
    end 
end 
downL=uint8(downL); 
imwrite(downL,'downsampling.jpg');
%get through LPF then downsampling
L1=imfilter(L, B, 'conv', 'replicate'); 
downL1=zeros(row/4,col/4); 
for i=1:1:row/4 
    for j=1:1:col/4
        downL1(i,j)=mean2(L1((i-1)*4+1:1:i*4,(j-1)*4+1:1:j*4));</p> 
    end
end 
downL1=uint8(downL1);
imwrite(downL1,'downsamplingAF.jpg');
%--------noise smoothing--------%
%Gaussin noise
nG1=imnoise(A,'gaussian',0,0.005);
imwrite(nG1,'nG1.jpg');
nG1LPF=imfilter(nG1, B, 'conv', 'replicate');
imwrite(nG1LPF,'nG1AF.jpg')
nG2=imnoise(A,'gaussian',0,0.01);
imwrite(nG2,'nG2.jpg');
nG2LPF=imfilter(nG2, B, 'conv', 'replicate');
imwrite(nG2LPF,'nG2AF.jpg')
nG3=imnoise(A,'gaussian',0,0.03);
imwrite(nG3,'nG3.jpg');
nG3LPF=imfilter(nG3, B, 'conv', 'replicate');
imwrite(nG3LPF,'nG3AF.jpg') 
                        </pre>
                    </div>
                    <hr>
                    <div class="topic">
                        <h3>Sptial Filter (Time Domain)</h3>
                        <h4>Median Filter</h4>
                        <h6><em>Written by Zhuoyu Li</em>on Feb. 24, 2015.</h6>
                        <p>In order to test the function of median filter, we add salt &amp; pepper noise to a woman picture.</p>
                        <p>The result show that the median filter removes the background noise, which can not done with AF.</p>
                        <div class="content-image">
                            <img src="../image/Feb 24/nw.jpg" style="height: 400px;">
                            <img src="../image/Feb 24/nwMF.jpg" style="height: 400px;">
                        </div>
                        <p>Matlab Code:</p>
                        <pre class="mcode">
clear;clc; 
A=imread('woman.tif'); 
B=imnoise(A,'salt & pepper',0.02); 
imwrite(B,'nw.jpg'); 
C=medfilt2(B,'symmetric');
imwrite(C,'nwMF.jpg'); 
                        </pre>
                    </div>
                    <hr>
                    <div class="topic">
                        <h3> Sptial Filter (Time Domain) </h3>
                        <h4> Laplacian Filter</h4>
                        <h6><em>Written by Zhuoyu Li</em>on Feb. 24, 2015.</h6>
                        <p> <em> Blurred picture recovery </em> </p>
                        <p>To test the image sharpening with Laplacian filter, we start with blured moon gray picture.</p>
                        <p>The picture blow are original picture, picture goes through Laplacian filter, and sharpened picutre. <p>
                        <div class="content-image">
                            <img src="../image/Feb 24/moon.jpg" style="width: 330px">
                            <img src="../image/Feb 24/moonlaplacian.jpg" style="width: 330px">
                            <img src="../image/Feb 24/moonsharpen.jpg" style="width: 330px">
                        </div>
                        <p>Matlab Code:</p>
                        <pre class="mcode">
clear;clc;  
A=imread('moon.tif'); 
B=fspecial('laplacian',0); 
C=imfilter(A,B,'replicate'); 
D=A-C; 
imwrite(A,'moon.jpg');   
imwrite(C,'moonlaplacian.jpg');   
imwrite(D,'moonsharpen.jpg');
                        </pre>
                        <p> <em> Edge enhancement </em> </p>
                        <p>Here we show the edge enhancement function by laplacian filter. At the same times, we want to know how background noise is handed. </p>
                        <p>So we start with a blurred lena picture with Gaussian noise, which derived in AF.<p>
                        <p>The output picture format is I+a*Ih, and here I define a as enhancement factor.<p>
                        <p>The follow picture is original picture and enhancement factor a=0.1, 0.3, and 0.5, correspondingly.<p>
                        <div class="content-image">
                            <img src="../image/Feb 24/nG1AF.jpg" style="width: 240px">
                            <img src="../image/Feb 24/01.jpg" style="width: 240px">
                            <img src="../image/Feb 24/03.jpg" style="width: 240px">
                            <img src="../image/Feb 24/05.jpg" style="width: 240px">
                        </div>
                        <p> The results show that the noise of the output picture are enhanced, as well as the edges. </p>
                        <p>Matlab Code:</p>
                        <pre class="mcode">
X=imread('nG1LPF.jpg');
X1=imfilter(X,B,'replicate');
X2=X-X1;
Y1=X+0.1*X2;
Y2=X+0.3*X2;
Y3=X+0.5*X2;
imwrite(Y1,'01.jpg');
imwrite(Y2,'03.jpg'); 
imwrite(Y3,'05.jpg');
                        </pre>
                        <p> <em> High pass filter with histogram equalization </em> </p>
                        <p> Firstly the original picture go through a high band pass filter, generating the second picture, which shows that the high frequency components are enhanced. </p>
                        <p> Then the picture are histogram equalized, which makes the picture less contracted. So we can clearly see what in the shadows in the x-ray picture.</p>
                        <div class="content-image">
                            <img src="../image/Feb 24/xray.jpg" style="width: 320px">
                            <img src="../image/Feb 24/xrayHP.jpg" style="width: 320px">
                            <img src="../image/Feb 24/xray2.jpg" style="width: 320px">
                        </div>
                        <p>Matlab Code:</p>
                        <pre class="mcode">
H=imread('xray.tif');
H1=imfilter(H,B,'replicate');
H2=H-H1;
H3=histeq(H2);
imwrite(H,'xray.jpg');
imwrite(H2,'xrayHP.jpg');
imwrite(H3,'xray2.jpg');  
                        </pre>
                    </div>
                </div> 
        </div>
        <a class="topping" href="#top"><span class="glyphicon glyphicon-arrow-up gly-topping"></span></a>
        <footer class="row">
            &copy; Zhuoyu Li 2015
        </footer>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    </body>
</html>